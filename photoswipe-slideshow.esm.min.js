// PhotoSwipe slideshow plugin v1.4
// https://github.com/htmltiger/photoswipe-slideshow
class PhotoSwipeSlideshow{constructor(t,e){this.swake=!1,this.wakeo=null,this.state=-1,this.timert=0,this.time=e||4e3,this.lightbox=t,this.lightbox.on("init",()=>{this.init(this.lightbox.pswp)})}init(t){t.on("uiRegister",()=>{t.ui.registerElement({name:"playpause-button",title:"Play [Space] Time +/-",order:18,isButton:!0,html:'<svg aria-hidden="true" class="pswp__icn" viewBox="0 0 32 32" width="32" height="32"><use class="pswp__icn-shadow" xlink:href="#pswp__icn-pause"/><use class="pswp__icn-shadow" xlink:href="#pswp__icn-play"/><path id="pswp__icn-play" d="M 6.3,25 C 13,22 19,19 26,16 19,12 13,9.9 6.3,7 Z" /><path id="pswp__icn-pause" style="display:none" d="m 21,6.6 h 5 V 25 H 21 Z M 6.4,6.6 H 11 V 25 H 6.4 Z"/></svg>',onClick:(t,e)=>{this.player()}}),t.events.add(document,"keydown",t=>{const e=t.keyCode,i=1e3;32==e&&(this.player(),t.preventDefault()),38!=e&&107!=e&&187!=e||(this.time=Math.max(i,this.time+i)),40!=e&&109!=e&&189!=e||(this.time=Math.max(i,this.time-i))})}),this.lightbox.on("close",()=>{this.state>0&&this.player()})}player(){if(this.state<0){var t=this;setTimeout(function(){t.stimer()},600),t.state=0}else this.stimer()}stimer(){this.state=this.state?0:1,this.state?this.timer():clearTimeout(this.timert),document.querySelector("#pswp__icn-pause").style.display=this.state?"inline":"none",document.querySelector("#pswp__icn-play").style.display=this.state?"none":"inline",this.wake(this.state)}timer(){this.timert=setTimeout(this.timer.bind(this),this.time),pswp.next()}wake(t){this.swake!=t&&("keepAwake"in screen?screen.keepAwake=t:"wakeLock"in navigator&&(this.wakeo?(this.wakeo.release(),this.wakeo=null):navigator.wakeLock.request("screen").then(t=>{this.wakeo=t,this.wakeo.addEventListener("release",()=>{this.wakeo=null,this.swake=!1})}).catch(t=>{})),this.swake=t)}}export default PhotoSwipeSlideshow;
