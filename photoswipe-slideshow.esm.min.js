/*! PhotoSwipe slideshow plugin v1.7  https://github.com/htmltiger/photoswipe-slideshow */
class PhotoSwipeSlideshow{constructor(t,e){document.head.insertAdjacentHTML("beforeend","<style>.pswp__timer{height:3px;background:#c00;width:0;position:fixed;bottom:0}.load .pswp__timer{width:100%}</style>"),this.swake=!1,this.wakeo=null,this.state=-1,this.timert=0,this.time=Number(localStorage.getItem("pswptime")),this.time=this.time>0?this.time:e||4,this.lightbox=t,this.lightbox.on("init",()=>{this.init(this.lightbox.pswp)})}init(t){t.on("uiRegister",()=>{t.ui.registerElement({name:"playpause-button",title:"Play [Space] Time +/-",order:18,isButton:!0,html:'<svg aria-hidden="true" class="pswp__icn" viewBox="0 0 32 32"><use class="pswp__icn-shadow" xlink:href="#pswp__icn-pause"/><use class="pswp__icn-shadow" xlink:href="#pswp__icn-play"/><path id="pswp__icn-play" d="M7.4 25 25 16 7.4 6.6Z" /><path id="pswp__icn-pause" style="display:none" d="m7 7h4l0 18h-4zm14 0h4v18h-4z"/></svg>',onClick:(t,e)=>{this.player()}}),t.ui.registerElement({name:"playtime",className:"pswp__time",appendTo:"wrapper"}),t.events.add(document,"keydown",t=>{const e=t.keyCode;32==e&&(this.player(),t.preventDefault()),38!=e&&107!=e&&187!=e||this.timer(1),40!=e&&109!=e&&189!=e||this.timer(-1)})}),this.lightbox.on("close",()=>{this.state>0&&this.player()})}player(){if(this.state<0){var t=this;setTimeout(function(){t.stimer()},600),t.state=0}else this.stimer()}stimer(t){this.state=this.state?0:1,this.state?this.timer():(this.bar(0),clearTimeout(this.timert),this.timert=null),document.querySelector("#pswp__icn-pause").style.display=this.state?"inline":"none",document.querySelector("#pswp__icn-play").style.display=this.state?"none":"inline",this.wake(this.state)}timer(t,e){this.bar(0),this.timert&&(clearTimeout(this.timert),this.timert=null),this.state<1||(t&&(this.time=Math.max(1,this.time+t),localStorage.setItem("pswptime",this.time),(e=document.querySelector(".pswp__counter"))&&(e.innerHTML=this.time+"s")),pswp.currSlide.content.isLoading()?this.timert=setTimeout(this.timer.bind(this),200):(this.timert=setTimeout(this.timer.bind(this),1e3*this.time),t||pswp.next(),this.bar(2)))}bar(t,e){if(e=document.querySelector(".pswp__time"),t){if(2==t)return e.innerHTML='<div class="pswp__timer" style="transition:width '+this.time+'s;"></div>',void setTimeout(this.bar.bind(this),100,1);e.classList.add("load")}else e.innerHTML="",e.classList.remove("load")}wake(t){this.swake!=t&&("keepAwake"in screen?screen.keepAwake=t:"wakeLock"in navigator&&(this.wakeo?(this.wakeo.release(),this.wakeo=null):navigator.wakeLock.request("screen").then(t=>{this.wakeo=t,this.wakeo.addEventListener("release",()=>{this.wakeo=null,this.swake=!1})}).catch(t=>{})),this.swake=t)}}export default PhotoSwipeSlideshow;
